*** Keywords ***
Application::Open Chrome
    [Arguments]    ${port}    ${version}    ${deviceName}
    [Documentation]    Opens the calculator app with a new appium session.
    Open Application    http://localhost:${port}/wd/hub    platformName=Android    platformVersion=${version}    alias=MyChrome1
    ...    deviceName=${deviceName}    noReset=true    browserName=Chrome    automationName=uiautomator2

Application::Login Magnage Page
    [Arguments]    ${user}
    Application::Open Chrome    ${user.port}    ${user.version}    ${user.deviceName}
    Go To Url    ${user.url}
    Switch To Context    NATIVE_APP
    Wait Until Element Is Visible    //*[@class='android.widget.EditText' and @password ='false']    timeout=30s    error=Password input should be visible.
    Input Text   //*[@class='android.widget.EditText' and @password ='false']    ${user.account}
    Input Text    //*[@text='登入密碼']    ${user.password}
    Click Element    //*[@resource-id='submit']
    Wait Until Element Is Visible    xpath=//*[contains(@text, '解除鎖定')]    timeout=${slowNetPeriod}    error=Web should be login.

Application::Open VPN App
    Press Keycode    ${homeKey}
    ${AppExist} =    Run Keyword And Return Status    FlyVPN Should Exist
    Run Keyword Unless    ${AppExist}    Press Keycode    ${homeKey}
    Click Element After It Is Visible    //*[@content-desc ='FlyVPN']